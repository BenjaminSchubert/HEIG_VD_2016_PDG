<ion-header>
	<ion-navbar>
		<ion-title class="hidden">Register</ion-title>
	</ion-navbar>
</ion-header>

<!-- Registration form -->
<ion-content>
	<div class="content">
		<div class="register-page">
			<h1>Register</h1>

			<form [formGroup]="form" (ngSubmit)="register()">
                <!-- username -->
				<ion-item>
					<ion-label floating>Username</ion-label>
					<ion-input type="text" formControlName="username"></ion-input>
				</ion-item>
                <p *ngIf="!(form.get('username').valid || form.get('username').pristine)" class="error-row">
                    {{ display_error(form.get("username").errors) }}
                </p>

                <!-- email -->
				<ion-item>
					<ion-label floating>Email</ion-label>
					<ion-input type="email" formControlName="email"></ion-input>
				</ion-item>
                <p *ngIf="!(form.get('email').valid || form.get('email').pristine)" class="error-row">
                    {{ display_error(form.get("email").errors) }}
                </p>

                <!-- phone number -->
				<ion-item>
					<ion-label floating>Phone number</ion-label>
					<ion-input type="tel" formControlName="phone_number"></ion-input>
				</ion-item>
				<p><small>optional, required for searching for friends in your contact list</small></p>
                <p *ngIf="!(form.get('phone_number').valid || form.get('phone_number').pristine)" class="error-row">
                    {{ display_error(form.get("phone_number").errors) }}
                </p>

                <!-- country -->
				<div *ngIf="form.get('phone_number').value">
					<ion-item>
						<ion-select placeholder="Country" formControlName="country">
							<ion-option *ngFor="let code of countryCodes" [value]="code">{{ countries[code] }}</ion-option>
						</ion-select>
					</ion-item>
					<p><small>Please select your country</small></p>
				</div>
                <p *ngIf="!(form.get('country').valid || form.get('country').pristine)" class="error-row">
                    {{ display_error(form.get("country").errors) }}
                </p>

                <!-- password -->
				<ion-item>
					<ion-label floating>Password</ion-label>
					<ion-input type="password" formControlName="password"></ion-input>
				</ion-item>
                <p *ngIf="!(form.get('password').valid || form.get('password').pristine)" class="error-row">
                    {{ display_error(form.get("password").errors) }}
                </p>

                <!-- password confirmation -->
				<ion-item>
					<ion-label floating>Confirm password</ion-label>
					<ion-input type="password" formControlName="passwordConfirmation"></ion-input>
				</ion-item>
				<p><small>the two passwords must match</small>
                <p *ngIf="!(form.get('passwordConfirmation').valid || form.get('passwordConfirmation').pristine)" class="error-row">
                    {{ display_error(form.get("passwordConfirmation").errors) }}
                </p>


                <div class="row alert alert-danger form-error" *ngIf="display_error(form.errors)">
                    {{ display_error(form.errors) }}
                </div>

				<button ion-button block icon-right round large type="submit" [disabled]="!form.valid">
					Register
					<ion-icon name="arrow-forward"></ion-icon>
				</button>
			</form>

			<img src="assets/img/rady-logo.png">
		</div>
	</div>
</ion-content>
